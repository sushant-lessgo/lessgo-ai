!function(){"use strict";function e(e){const t=document.createElement("div");return t.textContent=e,t.innerHTML}function t(e,t){const n=e.parentElement.querySelector(".lessgo-form-error");n&&n.remove();const o=document.createElement("div");o.className="lessgo-form-error",o.textContent=t,o.style.cssText="color: #DC2626; font-size: 0.875rem; margin-top: 0.25rem;",e.parentElement.appendChild(o),e.style.borderColor="#DC2626"}function n(e){let n=!0;return e.querySelectorAll("input, textarea, select").forEach(e=>{if(function(e){const t=e.parentElement.querySelector(".lessgo-form-error");t&&t.remove(),e.style.borderColor=""}(e),e.hasAttribute("required")&&!e.value.trim())return t(e,"This field is required"),void(n=!1);var o;"email"===e.type&&e.value.trim()&&((o=e.value.trim())&&o.includes("@")&&o.includes(".")||(t(e,"Please enter a valid email address"),n=!1))}),n}function o(e,t){const n=e.querySelector(".inline-form-error");n&&n.remove();const o=document.createElement("div");o.className="inline-form-error text-red-600 text-sm mt-2",o.textContent=t,e.appendChild(o),setTimeout(()=>o.remove(),5e3)}function r(e,t){const n=e.querySelector(".lessgo-form-status");n&&n.remove();const o=document.createElement("div");o.className="lessgo-form-status",o.textContent=t,o.style.cssText="background: #FEE2E2; color: #DC2626; padding: 0.75rem; border-radius: 0.5rem; margin-top: 1rem; font-size: 0.875rem;",e.appendChild(o),setTimeout(()=>o.remove(),5e3)}async function s(t){t.preventDefault();const o=t.target,s=o.querySelector('button[type="submit"]'),a=s?s.textContent:"";if(!n(o))return;const i=o.dataset.formId,l=o.dataset.pageId,c=o.dataset.ownerId,d=o.dataset.successMessage;if(!i||!l||!c)return void r(o,"Form configuration error. Please contact support.");s&&(s.disabled=!0,s.textContent="Submitting...");const m=new FormData(o),u={};m.forEach((e,t)=>{u[t]=e});try{const t=await fetch("/api/forms/submit",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({formId:i,data:u,publishedPageId:l,userId:c}),keepalive:!0}),n=await t.json();t.ok?("function"==typeof window._lessgoTrack&&window._lessgoTrack("form_submit",{formId:i,pageId:l}),function(t,n){const o=`\n      <div class="bg-green-50 border border-green-200 rounded-2xl p-8">\n        <div class="text-center">\n          <div class="text-green-600 text-2xl mb-2">âœ“</div>\n          <h3 class="text-lg font-semibold text-green-900 mb-1">Thank you!</h3>\n          <p class="text-green-700">${e(n||"Your submission has been received.")}</p>\n        </div>\n      </div>\n    `;t.outerHTML=o}(o,d)):(r(o,n.message||"Submission failed. Please try again."),s&&(s.disabled=!1,s.textContent=a))}catch(e){console.error("Form submission error:",e),r(o,"Network error. Please check your connection and try again."),s&&(s.disabled=!1,s.textContent=a)}}async function a(t){t.preventDefault();const r=t.target,s=r.closest("[data-lessgo-inline-form]");if(!s)return;const a=r.querySelector('button[type="submit"]'),i=a?a.textContent:"";if(!n(r))return;const l=s.dataset.lessgoInlineForm,c=s.dataset.pageId,d=s.dataset.ownerId,m=s.dataset.successMessage;if(!l||!c||!d)return void o(s,"Form configuration error. Please contact support.");a&&(a.disabled=!0,a.textContent="Submitting...");const u=new FormData(r),f={};u.forEach((e,t)=>{f[t]=e});try{const t=await fetch("/api/forms/submit",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({formId:l,data:f,publishedPageId:c,userId:d}),keepalive:!0}),n=await t.json();t.ok?("function"==typeof window._lessgoTrack&&window._lessgoTrack("form_submit",{formId:l,pageId:c,placement:"inline"}),function(t,n){const o=t.querySelector(".inline-form-container");if(!o)return;const r=`\n      <div class="flex items-center gap-2 text-green-600 font-medium">\n        <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">\n          <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/>\n        </svg>\n        <span>${e(n||"Thank you! We'll be in touch soon.")}</span>\n      </div>\n    `;o.innerHTML=r}(s,m)):(o(s,n.message||"Submission failed. Please try again."),a&&(a.disabled=!1,a.textContent=i))}catch(e){console.error("Inline form submission error:",e),o(s,"Network error. Please check your connection and try again."),a&&(a.disabled=!1,a.textContent=i)}}function i(){const e=document.querySelectorAll("[data-lessgo-form]");e.forEach(e=>{e.addEventListener("submit",s)});const t=document.querySelectorAll("[data-lessgo-inline-form] form");t.forEach(e=>{e.addEventListener("submit",a)}),console.log(`[Lessgo Forms] Initialized ${e.length} full form(s) and ${t.length} inline form(s)`)}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",i):i()}();