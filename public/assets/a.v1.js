!function(){"use strict";const e=document.currentScript||document.querySelector("script[data-page-id]"),t={pageId:e?.dataset.pageId,slug:e?.dataset.slug};function n(){const e="lessgo_session_id";let t=sessionStorage.getItem(e);return t||(t=Math.random().toString(36).substring(2)+Date.now().toString(36),sessionStorage.setItem(e,t)),t}function o(){const e=new URLSearchParams(window.location.search),t={};return["utm_source","utm_medium","utm_campaign","utm_content","utm_term"].forEach(n=>{const o=e.get(n);o&&(t[n]=o)}),t}function a(){const e=navigator.userAgent.toLowerCase();return/mobile|android|iphone|ipod|blackberry|iemobile|opera mini/i.test(e)?"mobile":/tablet|ipad/i.test(e)?"tablet":"desktop"}function i(e,i={}){!function(e){const t="https://lessgo.ai/api/analytics/event",n=JSON.stringify(e);if(navigator.sendBeacon){const e=new Blob([n],{type:"application/json"});if(navigator.sendBeacon(t,e))return}fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:n,keepalive:!0}).catch(e=>{console.error("[Lessgo Analytics] Track error:",e)})}({event:e,pageId:t.pageId,slug:t.slug,timestamp:(new Date).toISOString(),url:window.location.href,referrer:document.referrer||void 0,sessionId:n(),deviceType:a(),...o(),...i})}function s(){i("pageview",{title:document.title}),document.addEventListener("click",e=>{const t=e.target.closest("[data-lessgo-cta]");t&&i("cta_click",{ctaText:t.textContent?.trim()||t.innerText?.trim()||"",ctaHref:t.getAttribute("href")||""})}),console.log("[Lessgo Analytics] Initialized for",t.slug)}t.pageId&&t.slug?(window._lessgoTrack=i,"loading"===document.readyState?document.addEventListener("DOMContentLoaded",s):s()):console.warn("[Lessgo Analytics] Missing required config (data-page-id or data-slug)")}();